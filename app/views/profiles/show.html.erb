<%= render "shared/header" %>

<div id="landing_welcome_page">
  <div class="container">
    <div class="row">

      <%#= Profile image upload  %>
      <div class="span4">
        <% if @user.profile_image.present? %>
        <%= image_tag @user.profile_image_url(:thumb).to_s%>
        <% else %>
	<%= image_tag "profile-placeholder1.png" %>
        <% end %>

        <%#= Space w line  %>
        <div class="name"></div>

        <%#= Please bare in mind these are strickly temporary placeholders i.e whitespace  %>
	<%= render '/home/sidebar' %>
        <h5><u>Verifications</u></h5>
	<%= icon("fa fa-facebook-square") %> Facebook: <small>158 Friends</small>
        <div class="name"></div>
	<%= icon("fa fa-twitter") %> Twitter: <small>2,300 Followers</small>
        <div class="name"></div>
	<%= icon("fa fa-linkedin") %> LinkedIn: <small>82 Connections</small>
        <div class="name"></div>
      </div>

      <div class="span8">
        <%# User name %>
        <span class="name2">
          <span class="name1">
            <% if @user.first_name.blank? %>
            <%= @user.first_name.present? ? @user.first_name : "N/A" %>
            <% else %>
            <%= @user.first_name %> <%= @user.last_name %>
            <% end %>
          </span>
          <span class="side-buttons">
            <div class="btn btn-warning move"><%= link_to "Message", new_message_path, remote: true %> <%= icon("fa fa-comments")%></div>
          </span>
        </span>
      </div>

      <div class="row">
        <br /><br / >

        <div class="span6">
          <%# User occupation %>
          <i class="fa fa-usd"></i>:
          <%= @user.occupation.present? ? @user.occupation : "N/A" %>
      </div>

      <div class="addy">
        <div class="span2">
         <%# User address %>
         <i class="fa fa-home"></i>:
         <%= @user.address.present? ? @user.address : "N/A" %>
       </div>
     </div>

     <div class="span6">
       <%# User gender %>
       <hr>
       <% if @user.gender == "M" %>
       <i class="fa fa-male"></i> Male
       <% else %>
       <i class="fa fa-female"></i> Female
       <% end %>
     </div>

     <div class="span2">
       <!-- Code to calculate age by user birthday -->
       <hr>
       Age:
       <% if @user.birthday.present? %>
       <%= today = Date.today
	   d = Date.new(today.year, @user.birthday.month, @user.birthday.day)
       age = d.year - @user.birthday.year - (d > today ? 1 : 0) %>
       <% else %>
       <%= @user.birthday.present? ? @user.birthday.year : "N/A" %>
       <% end %>
     </div>

     <div class="span8"></div>

     <div class="span8"><div class="name"></div></div>
     <div class="span8">
      <div class="tabbable"> <!-- Only required for left/right tabs -->
        <ul class="nav nav-tabs">
          <li class="active"><a href="#tab1" data-toggle="tab">About me</a></li>
          <li><a href="#tab2" data-toggle="tab">Photos</a></li>
          <li><a href="#tab3" data-toggle="tab">Personality</a></li>
        </ul>
        <div class="tab-content">
          <div class="tab-pane in active" id="tab1">
            <% @questions_for_about.each_with_index do |question, index| %>
              <div class="question">
                <h4 class="user_questions">
                  <%= index + 1 %>. <%= question.question %>
                </h4>
                <div class="answer" id="answer_<%= question.id %>">
                  <%= answer_for(question) %>
                </div>
              </div>
            <% end %>
          </div>
          <div class="tab-pane" id="tab2">
            <div class="page-header">
              <div class="col-sm-6 col-md-3">
		<% if @user.photos.present? %>
                <span class="gallery"><%= render @user.photos %></span>
		<% else %>
		<h5><%= @user.first_name %> hasn't uploaded any photos..</h5>
		<% end %>
              </div>
              <div class="clearfix"></div>
            </div>
            <div class="photos_cont">
            </div>
          </div>
          <div class="tab-pane" id="tab3">
            <% @questions_for_personality.each_with_index do |question, index| %>
              <div class="question">
                <h4 class="user_questions">
                  <%= index + 1 %>. <%= question.question %>
                </h4>
                <div class="answer" id="answer_<%= question.id %>">
                  <%= answer_for(question) %>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
  <%= render '/shared/footer' %>
  <%= render 'shared/message_modal' %>
</div>
</div>

<script id="template-upload" type="text/x-tmpl">
<div class="upload">
{%=o.name%}
<div class="progress"><div class="bar" style="width: 0%;"></div></div>
</div>
</script>
<script>
var fb_param = {};
fb_param.pixel_id = '6009056882201';
fb_param.value = '0.00';
(function(){
  var fpw = document.createElement('script');
  fpw.async = true;
  fpw.src = '//connect.facebook.net/en_US/fp.js';
  var ref = document.getElementsByTagName('script')[0];
  ref.parentNode.insertBefore(fpw, ref);
})();
</script>

<noscript>
  <img height="1" src="https://www.facebook.com/offsite_event.php?id=6009056882201&amp;value=0" style="display:none;" width="1"/>
</noscript>
<script type="text/javascript">
// remove default datepicker event
jQuery(document).off('best_in_place:datepicker');

jQuery(document).on('best_in_place:datepicker', function(event, bip, element) {
  // Display the jQuery UI datepicker popup
  jQuery(element).find('input')
    .datepicker({
      format: element.data('date-format')
    })
    .on('hide', function(){
        bip.update();
    })
    .on('changeDate', function(){
        $(this).datepicker('hide');
    })
    .datepicker('show');
});
</script>
